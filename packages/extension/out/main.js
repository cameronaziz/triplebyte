var g=Object.create;var p=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty;var T=(t,e)=>{for(var a in e)p(t,a,{get:e[a],enumerable:!0})},h=(t,e,a,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of k(e))!x.call(t,n)&&n!==a&&p(t,n,{get:()=>e[n],enumerable:!(r=y(e,n))||r.enumerable});return t};var C=(t,e,a)=>(a=t!=null?g(b(t)):{},h(e||!t||!t.__esModule?p(a,"default",{value:t,enumerable:!0}):a,t)),U=t=>h(p({},"__esModule",{value:!0}),t);var o=(t,e,a)=>new Promise((r,n)=>{var i=c=>{try{l(a.next(c))}catch(d){n(d)}},m=c=>{try{l(a.throw(c))}catch(d){n(d)}},l=c=>c.done?r(c.value):Promise.resolve(c.value).then(i,m);l((a=a.apply(t,e)).next())});var D={};T(D,{activate:()=>W,deactivate:()=>v});module.exports=U(D);var w=C(require("path")),s=require("vscode"),S=()=>{let t=s.workspace.workspaceFolders;return t?t.map(e=>e.uri):[]},P=t=>o(void 0,null,function*(){let a=(yield s.workspace.fs.readDirectory(t)).filter(([r])=>!r.startsWith(".")&&!r.startsWith("node_modules")).map(([r,n])=>s.Uri.file(w.default.join(t.fsPath,r)));return f(a)}),f=t=>o(void 0,null,function*(){let e=[];for(let a=0;a<t.length;a++){let r=t[a];switch((yield s.workspace.fs.stat(r)).type){case s.FileType.Directory:{let i=yield P(r);e.push(...i)}case s.FileType.File:r.path.endsWith("package.json")&&e.push(r)}}return e}),j=(t,e)=>o(void 0,null,function*(){let a=t.map(i=>o(void 0,null,function*(){let m=yield s.workspace.fs.readFile(i),l=JSON.parse(m.toString());if(l.bin)return e.sendText(`cd ${i.fsPath.split("/").slice(0,-1).join("/")}`),Object.keys(l.bin)})),n=(yield Promise.all(a)).filter(i=>!!i).reduce((i,m)=>i.concat(m),[]);return console.log(n),n}),F=()=>o(void 0,null,function*(){let t=S();if(t.length<1){s.window.showErrorMessage("No workspace found");return}let e=s.window.createTerminal({name:"Tetris",shellPath:"bash",location:2}),a=yield f(t);yield j(a,e),e.show(),e.sendText("tb")}),u=()=>o(void 0,null,function*(){yield s.commands.executeCommand("workbench.action.terminal.focus"),yield s.commands.executeCommand("workbench.action.terminal.toggleTerminal"),s.commands.executeCommand("notifications.clearAll"),s.window.showInformationMessage("Starting Tetris in integrated terminal.");let{activeTerminal:t}=s.window;t&&t.hide(),yield F()}),W=t=>o(void 0,null,function*(){s.commands.registerCommand("triplebyte.kill",()=>{t.workspaceState.update("hasStarted",!1)}),s.commands.registerCommand("triplebyte.auto",()=>{t.workspaceState.update("hasStarted",!0)}),s.commands.registerCommand("triplebyte.launch",u),yield u()}),v=()=>{};0&&(module.exports={activate,deactivate});
