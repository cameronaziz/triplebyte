var g=Object.create;var d=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var b=(t,e)=>{for(var s in e)d(t,s,{get:e[s],enumerable:!0})},h=(t,e,s,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of k(e))!S.call(t,n)&&n!==s&&d(t,n,{get:()=>e[n],enumerable:!(r=y(e,n))||r.enumerable});return t};var U=(t,e,s)=>(s=t!=null?g(x(t)):{},h(e||!t||!t.__esModule?d(s,"default",{value:t,enumerable:!0}):s,t)),P=t=>h(d({},"__esModule",{value:!0}),t);var i=(t,e,s)=>new Promise((r,n)=>{var o=c=>{try{l(s.next(c))}catch(m){n(m)}},p=c=>{try{l(s.throw(c))}catch(m){n(m)}},l=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,p);l((s=s.apply(t,e)).next())});var E={};b(E,{activate:()=>W,deactivate:()=>D});module.exports=P(E);var u=U(require("path")),a=require("vscode"),T=()=>{let t=a.workspace.workspaceFolders;return t?t.map(e=>e.uri):[]},j=t=>i(void 0,null,function*(){let s=(yield a.workspace.fs.readDirectory(t)).filter(([r])=>!r.startsWith(".")&&!r.startsWith("node_modules")).map(([r,n])=>a.Uri.file(u.default.join(t.fsPath,r)));return w(s)}),w=t=>i(void 0,null,function*(){let e=[];for(let s=0;s<t.length;s++){let r=t[s];switch((yield a.workspace.fs.stat(r)).type){case a.FileType.Directory:{let o=yield j(r);e.push(...o)}case a.FileType.File:r.path.endsWith("package.json")&&e.push(r)}}return e}),C=(t,e)=>i(void 0,null,function*(){let s=t.map(o=>i(void 0,null,function*(){let p=yield a.workspace.fs.readFile(o),l=JSON.parse(p.toString());if(l.bin)return e.sendText(`cd ${o.fsPath.split("/").slice(0,-1).join("/")}`),Object.keys(l.bin)})),n=(yield Promise.all(s)).filter(o=>!!o).reduce((o,p)=>o.concat(p),[]);return console.log(n),n}),F=()=>i(void 0,null,function*(){let t=T();if(t.length<1){a.window.showErrorMessage("No workspace found");return}let e=a.window.createTerminal({name:"Tetris",shellPath:"bash",location:2}),s=yield w(t);yield C(s,e),e.show(),a.commands.executeCommand("workbench.action.toggleMaximizedPanel"),e.sendText("tb")}),f=()=>i(void 0,null,function*(){yield a.window.showInformationMessage("Starting Game",{modal:!0}),F()}),W=t=>{t.workspaceState.get("hasStarted")&&f(),a.commands.registerCommand("triplebyte.launch",()=>i(void 0,null,function*(){f(),t.workspaceState.update("hasStarted",!0)}))},D=()=>{};0&&(module.exports={activate,deactivate});
